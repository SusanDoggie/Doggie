os:
  - linux
  - osx
language: generic
sudo: required
dist: trusty
notifications: never
osx_image: xcode8
env:
  - VERSION="3.0.1"
  
before_install:
  - if [[ $TRAVIS_OS_NAME == "linux" ]]; then
        UBUNTU_RELEASE=`lsb_release -a 2>/dev/null`;
        if [[ $UBUNTU_RELEASE == *"15.10"* ]]; then
            OS="ubuntu1510";
            SWIFTFILE="swift-$VERSION-RELEASE-ubuntu15.10";    
        else
            OS="ubuntu1404";
            SWIFTFILE="swift-$VERSION-RELEASE-ubuntu14.04";
        fi
    fi
    
install:
  - if [[ $TRAVIS_OS_NAME == "linux" ]]; then
        sudo apt-get install -y clang libicu-dev uuid-dev;
        wget https://swift.org/builds/swift-$VERSION-release/$OS/swift-$VERSION-RELEASE/$SWIFTFILE.tar.gz;
        tar -zxf $SWIFTFILE.tar.gz;
        export PATH=$PWD/$SWIFTFILE/usr/bin:"${PATH}";
    fi
    
script:
  - rvm get stable
  - swift --version;
    
  - echo "üöÄ Building";
  - swift build;
  - if [[ $? == 0 ]]; then 
        echo "‚úÖ Build done";
    else
        echo "‚ùå Build failed";
        exit 1; 
    fi
    
  - echo "üöÇ Building Release";
  - swift build -c release;
  - if [[ $? == 0 ]]; then 
        echo "‚úÖ Build for release done";
    else
        echo "‚ùå Build for release failed";
        exit 1; 
    fi
    
  - echo "üîé Testing";
  - swift test;
  - if [[ $? == 0 ]]; then 
        echo "‚úÖ Tests done";
    else
        echo "‚ùå Tests failed";
        exit 1; 
    fi
    
  - echo "‚úÖ Done";
    
